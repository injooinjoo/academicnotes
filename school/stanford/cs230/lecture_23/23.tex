\documentclass[a4paper, 11pt]{article}

% --- íŒ¨í‚¤ì§€ ì„¤ì • ---
\usepackage{kotex} % í•œê¸€ ì§€ì›
\usepackage{geometry} % ì—¬ë°± ì„¤ì •
\geometry{left=25mm, right=25mm, top=25mm, bottom=25mm}
\usepackage{amsmath, amssymb, amsfonts} % ìˆ˜ì‹ íŒ¨í‚¤ì§€
\usepackage{graphicx}
\usepackage{adjustbox}  % í‘œ/ë°•ìŠ¤ í¬ê¸° ì¡°ì ˆ % ì´ë¯¸ì§€ ì‚½ì…
\usepackage{hyperref} % í•˜ì´í¼ë§í¬
\usepackage{xcolor} % ìƒ‰ìƒ ì§€ì›
\usepackage{listings} % ì½”ë“œ ë¸”ë¡
\usepackage[most]{tcolorbox}
\tcbuselibrary{breakable} % ë°•ìŠ¤ ë””ìì¸
\usepackage{enumitem} % ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼
\usepackage{booktabs} % í‘œ ë””ìì¸
\usepackage{array} % í‘œ ì •ë ¬

% --- ìƒ‰ìƒ ì •ì˜ ---
\definecolor{conceptblue}{RGB}{60, 100, 160}
\definecolor{analogygreen}{RGB}{80, 160, 100}
\definecolor{alertred}{RGB}{200, 60, 60}
\definecolor{exampleorange}{RGB}{230, 120, 30}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{backcolour}{rgb}{0.96,0.96,0.96}

% --- ì½”ë“œ ìŠ¤íƒ€ì¼ ì„¤ì • ---
\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{analogygreen},
    keywordstyle=\color{conceptblue},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{exampleorange},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=4,
    frame=single
}
\lstset{style=mystyle}

% --- ë°•ìŠ¤ ìŠ¤íƒ€ì¼ ì •ì˜ ---
\newtcolorbox{summarybox}[1]{
    colback=conceptblue!5!white,
    colframe=conceptblue!80!black,
    fonttitle=\bfseries,
    title=ğŸ“Œ #1
}

\newtcolorbox{analogybox}[1]{
    colback=analogygreen!5!white,
    colframe=analogygreen!80!black,
    fonttitle=\bfseries,
    title=ğŸ’¡ #1 (ì§ê´€ì  ë¹„ìœ )
}

\newtcolorbox{warningbox}[1]{
    colback=alertred!5!white,
    colframe=alertred!80!black,
    fonttitle=\bfseries,
    title=âš ï¸ #1 (ì˜¤í•´ ë°©ì§€ ê°€ì´ë“œ)
}

\newtcolorbox{mathbox}[1]{
    colback=exampleorange!5!white,
    colframe=exampleorange!80!black,
    fonttitle=\bfseries,
    title=ğŸ§® #1 (ìˆ˜í•™ì  ì¦ëª…)
}

% --- ë¬¸ì„œ ì •ë³´ ---
\title{\textbf{[CS230] Structuring Machine Learning Projects: \\ Single Number Evaluation Metric (F1 Score)}}
\author{Lecturer: Gemini (Integrated Editor)}
\date{}

\begin{document}

\maketitle

% --- 1. ì „ì²´ ëª©ì°¨ (TOC) ---
\section*{ğŸ“š Course Table of Contents}
\begin{itemize}
    \item[Chapter 1-5.] Deep Learning Fundamentals \textit{- Completed}
    \item[\textbf{Chapter 6.}] \textbf{Structuring ML Projects (Current Unit)}
    \begin{itemize}
        \item 6.1 Orthogonalization Strategy \textit{- Completed}
        \item \textbf{6.2 Single Number Evaluation Metric}
        \begin{itemize}
            \item Confusion Matrix (TP, TN, FP, FN)
            \item Precision vs Recall Trade-off
            \item Why Harmonic Mean? (F1 Score)
            \item Implementation
        \end{itemize}
        \item 6.3 Satisficing and Optimizing Metrics \textit{- Upcoming}
    \end{itemize}
\end{itemize}

\vspace{0.5cm}
\hrule
\vspace{0.5cm}

% --- 3. ì´ì „ ë‹¨ì› ì—°ê²° ---
\section*{ğŸ”— ì§€ë‚œ ì‹œê°„ ë³µìŠµ ë° ì—°ê²°}
ì§€ë‚œ ì‹œê°„ì— ìš°ë¦¬ëŠ” í”„ë¡œì íŠ¸ì˜ ë°©í–¥ì„ ì¡ëŠ” 'ì§êµí™”' ì „ëµì„ ë°°ì› ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë°©í–¥ì„ ì¡ì•˜ë‹¤ê³  ëì´ ì•„ë‹™ë‹ˆë‹¤.
íŒ€ì›ì´ ë‘ ê°œì˜ ëª¨ë¸ì„ ë“¤ê³  ì™”ìŠµë‹ˆë‹¤.
\textbf{"AëŠ” ì •ë°€ë„ê°€ ë†’ì€ë° ì¬í˜„ìœ¨ì´ ë‚®ê³ , BëŠ” ì •ë°€ë„ëŠ” ë‚®ì€ë° ì¬í˜„ìœ¨ì´ ë†’ìŠµë‹ˆë‹¤. ë­˜ ì“¸ê¹Œìš”?"}
ì—¬ê¸°ì„œ ë¨¸ë­‡ê±°ë¦¬ë©´ í”„ë¡œì íŠ¸ê°€ ë©ˆì¶¥ë‹ˆë‹¤. ì•¤ë“œë¥˜ ì‘ êµìˆ˜ëŠ” \textbf{"í‰ê°€ ì§€í‘œëŠ” í•˜ë‚˜ì—¬ì•¼ í•œë‹¤(Single Number Metric)"}ê³  ê°•ì¡°í•©ë‹ˆë‹¤. ê·¸ë˜ì•¼ ìˆ˜ë§ì€ ì‹¤í—˜ ê²°ê³¼ë¥¼ í•œ ì¤„ë¡œ ì„¸ìš°ê³ , 1ë“±ì„ ë°”ë¡œ ë½‘ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

% --- 4. ê°œìš” ---
\section{Unit Overview}
\begin{summarybox}{í•µì‹¬ ëª©í‘œ}
ì´ ë‹¨ì›ì€ ë¶ˆê· í˜• ë°ì´í„°ì—ì„œ ëª¨ë¸ ì„±ëŠ¥ì„ ì •í™•íˆ í‰ê°€í•˜ëŠ” \textbf{F1 Score}ë¥¼ ë‹¤ë£¹ë‹ˆë‹¤.
\begin{itemize}
    \item \textbf{ì •ì˜:} ì •ë°€ë„(Precision)ì™€ ì¬í˜„ìœ¨(Recall)ì˜ ê°œë…ì„ ì˜¤ì°¨ í–‰ë ¬ì„ í†µí•´ ìµí™ë‹ˆë‹¤.
    \item \textbf{ì´ìœ :} ì™œ ë‹¨ìˆœ í‰ê· ì´ ì•„ë‹Œ \textbf{ì¡°í™” í‰ê· (Harmonic Mean)}ì„ ì¨ì•¼ í•˜ëŠ”ì§€ ì¦ëª…í•©ë‹ˆë‹¤.
    \item \textbf{ê´€ê³„:} ì„ê³„ê°’ ë³€í™”ì— ë”°ë¼ ë‘ ì§€í‘œê°€ ë°˜ëŒ€ë¡œ ì›€ì§ì´ëŠ” \textbf{Trade-off} ê´€ê³„ë¥¼ íŒŒì•…í•©ë‹ˆë‹¤.
    \item \textbf{êµ¬í˜„:} Pythonìœ¼ë¡œ ì§ì ‘ ì§€í‘œë¥¼ ê³„ì‚°í•˜ê³  ë¶„ì„í•©ë‹ˆë‹¤.
\end{itemize}
\end{summarybox}

% --- 5. ìš©ì–´ ì •ë¦¬ ---
\section{Essential Terminology: Confusion Matrix}
\begin{center}
\begin{tabular}{|c|c|c|}
\hline
\textbf{êµ¬ë¶„} & \textbf{ì˜ˆì¸¡: Positive (1)} & \textbf{ì˜ˆì¸¡: Negative (0)} \\ \hline
\textbf{ì‹¤ì œ: Positive (1)} & \textbf{TP} (ì •ë‹µ) & \textbf{FN} (ë†“ì¹¨/ë¯¸ê²€ì¶œ) \\ \hline
\textbf{ì‹¤ì œ: Negative (0)} & \textbf{FP} (ì˜¤í•´/ê±°ì§“ ì•ŒëŒ) & \textbf{TN} (ì •ë‹µ) \\ \hline
\end{tabular}
\end{center}

% --- 6. í•µì‹¬ ê°œë… ìƒì„¸ ì„¤ëª… ---
\section{Core Concepts: ë‘ ë§ˆë¦¬ í† ë¼ ì¡ê¸°}

\subsection{1. Precision (ì •ë°€ë„)}

\textbf{ì§ˆë¬¸:} "ëª¨ë¸ì´ ì°¾ì€ ê²ƒ ì¤‘ì— ì§„ì§œëŠ” ì–¼ë§ˆë‚˜ ë˜ëŠ”ê°€?"
$$ P = \frac{TP}{TP + FP} $$
\begin{analogybox}{ê¹ê¹í•œ ë¯¸ì‹ê°€}
"ë‚˜ëŠ” ë§›ì—†ëŠ” ê±´ ì ˆëŒ€ ì•ˆ ë¨¹ì–´." (FP ì‹«ì–´í•¨)
ë§›ìˆëŠ” ê²ƒ(TP)ì„ ì¢€ ë†“ì¹˜ë”ë¼ë„, ë‚´ ì…ì— ë“¤ì–´ì˜¤ëŠ” ê±´ ë¬´ì¡°ê±´ ë§›ìˆì–´ì•¼ í•©ë‹ˆë‹¤.
\textbf{í™œìš©:} ìŠ¤íŒ¸ ë©”ì¼ ë¶„ë¥˜ (ì •ìƒ ë©”ì¼ì„ ìŠ¤íŒ¸í†µì— ë„£ìœ¼ë©´ ì¹˜ëª…ì ì„).
\end{analogybox}

\subsection{2. Recall (ì¬í˜„ìœ¨)}

\textbf{ì§ˆë¬¸:} "ì‹¤ì œ ì¡´ì¬í•˜ëŠ” ê²ƒ ì¤‘ì— ëª¨ë¸ì´ ì–¼ë§ˆë‚˜ ì°¾ì•˜ëŠ”ê°€?"
$$ R = \frac{TP}{TP + FN} $$
\begin{analogybox}{ê·¸ë¬¼ë§ ì–´ì„ }
"ì“°ë ˆê¸°ê°€ ì¢€ ì„ì—¬ë„ ì¢‹ìœ¼ë‹ˆ, ë¬¼ê³ ê¸°ëŠ” ë‹¤ ì¡ì•„ë¼." (FN ì‹«ì–´í•¨)
ì¡ë™ì‚¬ë‹ˆ(FP)ê°€ ê±¸ë ¤ë„ ê´œì°®ì§€ë§Œ, ë¬¼ê³ ê¸°(TP)ë¥¼ ë†“ì¹˜ë©´ ì•ˆ ë©ë‹ˆë‹¤.
\textbf{í™œìš©:} ì•” ì§„ë‹¨ (ì•” í™˜ìë¥¼ ì •ìƒì´ë¼ í•˜ë©´ ìƒëª…ì´ ìœ„í—˜í•¨), ë„ë‘‘ íƒì§€.
\end{analogybox}

\vspace{0.5cm}\hrule\vspace{0.5cm}

\section{Deep Dive: Why Harmonic Mean? (F1 Score)}

ì™œ ë‘ ì§€í‘œë¥¼ ê·¸ëƒ¥ ë”í•´ì„œ 2ë¡œ ë‚˜ëˆ„ë©´(ì‚°ìˆ  í‰ê· ) ì•ˆ ë ê¹Œìš”?

\begin{mathbox}{ë°”ë³´ ëª¨ë¸ì˜ í•¨ì •}
ì•” í™˜ìê°€ 1\%ì¸ ë°ì´í„°ê°€ ìˆìŠµë‹ˆë‹¤.
ì–´ë–¤ ëª¨ë¸ì´ \textbf{"ë¬´ì¡°ê±´ ì•”ì´ë‹¤(1)"}ë¼ê³  ì˜ˆì¸¡í•œë‹¤ê³  í•©ì‹œë‹¤. (Recall = 1.0, Precision $\approx$ 0.01)

\textbf{1. ì‚°ìˆ  í‰ê·  (Arithmetic Mean):}
$$ \frac{P + R}{2} = \frac{0.01 + 1.0}{2} \approx \textbf{0.5} $$
$\rightarrow$ ë§ë„ ì•ˆ ë˜ëŠ” ëª¨ë¸ì—ê²Œ 50ì ì´ë‚˜ ì¤ë‹ˆë‹¤. ê³¼ëŒ€í‰ê°€ì…ë‹ˆë‹¤.

\textbf{2. ì¡°í™” í‰ê·  (Harmonic Mean, F1 Score):}
$$ F1 = \frac{2}{\frac{1}{P} + \frac{1}{R}} = 2 \frac{P \times R}{P + R} $$
$$ 2 \frac{0.01 \times 1.0}{0.01 + 1.0} \approx \textbf{0.019} $$
$\rightarrow$ ë‘˜ ì¤‘ í•˜ë‚˜ë¼ë„ ë‚®ìœ¼ë©´ ì ìˆ˜ë¥¼ í™• ê¹ì•„ë²„ë¦½ë‹ˆë‹¤. ì´ê²ƒì´ ìš°ë¦¬ê°€ ì›í•˜ëŠ” í‰ê°€ ë°©ì‹ì…ë‹ˆë‹¤.
\end{mathbox}

% --- 7. êµ¬í˜„ ì½”ë“œ ---
\section{Implementation: Metric Calculation}

`scikit-learn`ì„ ì“°ë©´ ì‰½ì§€ë§Œ, ì›ë¦¬ ì´í•´ë¥¼ ìœ„í•´ `numpy`ë¡œ ì§ì ‘ êµ¬í˜„í•´ ë´…ì‹œë‹¤.

\begin{lstlisting}[language=Python, caption=Precision, Recall, F1 Implementation, breaklines=true]
import numpy as np

def calculate_metrics(y_true, y_pred):
    """
    y_true: ì‹¤ì œê°’ (0 or 1)
    y_pred: ì˜ˆì¸¡ê°’ (0 or 1)
    """
    # ë¶ˆë¦¬ì–¸ ì¸ë±ì‹±ìœ¼ë¡œ TP, FP, FN ê³„ì‚° (Vectorized)
    TP = np.sum((y_true == 1) \& (y_pred == 1))
    FP = np.sum((y_true == 0) \& (y_pred == 1))
    FN = np.sum((y_true == 1) \& (y_pred == 0))
    
    # 0ìœ¼ë¡œ ë‚˜ëˆ„ê¸° ë°©ì§€ìš© ì—¡ì‹¤ë¡ 
    epsilon = 1e-7
    
    # Precision \& Recall
    precision = TP / (TP + FP + epsilon)
    recall = TP / (TP + FN + epsilon)
    
    # F1 Score (Harmonic Mean)
    f1 = 2 * (precision * recall) / (precision + recall + epsilon)
    
    return precision, recall, f1

# --- ì‹¤í–‰ ---
if __name__ == "__main__":
    # ì•”í™˜ì(1) 2ëª…, ì •ìƒ(0) 8ëª…
    y_true = np.array([0, 1, 0, 0, 1, 0, 0, 0, 0, 0])
    
    # ëª¨ë¸ ì˜ˆì¸¡: 1ëª…ì€ ë§ì·„ì§€ë§Œ, ì •ìƒì¸ 1ëª…ì„ ì˜¤ì§„í•¨
    y_pred = np.array([0, 1, 0, 0, 0, 1, 0, 0, 0, 0])
    
    p, r, f1 = calculate_metrics(y_true, y_pred)
    
    print(f"Precision: {p:.2f}") # 0.50 (2ë²ˆ ì˜ˆì¸¡í•´ì„œ 1ë²ˆ ë§ìŒ)
    print(f"Recall:    {r:.2f}") # 0.50 (ì‹¤ì œ 2ëª… ì¤‘ 1ëª… ì°¾ìŒ)
    print(f"F1 Score:  {f1:.2f}") # 0.50
\end{lstlisting}

% --- 8. FAQ ---
\section{FAQ \& Pitfalls}

\textbf{Q. Accuracy(ì •í™•ë„)ëŠ” ì–¸ì œ ì“°ë‚˜ìš”?} \\
\textbf{A.} ë°ì´í„° í´ë˜ìŠ¤ ë¹„ìœ¨ì´ 50:50ìœ¼ë¡œ ê· í˜• ì¡í˜€ ìˆì„ ë•Œë§Œ ì”ë‹ˆë‹¤. ë¶ˆê· í˜• ë°ì´í„°(99:1)ì—ì„œëŠ” ë¬´ì¡°ê±´ 0ìœ¼ë¡œ ì°ì–´ë„ ì •í™•ë„ê°€ 99\%ê°€ ë‚˜ì˜¤ë¯€ë¡œ ë¬´ì˜ë¯¸í•©ë‹ˆë‹¤.

\textbf{Q. Recallì´ Precisionë³´ë‹¤ í›¨ì”¬ ì¤‘ìš”í•œ ê²½ìš°ëŠ”ìš”?} \\
\textbf{A.} F1 ScoreëŠ” ë‘ ì§€í‘œë¥¼ 1:1ë¡œ ë´…ë‹ˆë‹¤. Recallì„ ë” ì¤‘ìš”í•˜ê²Œ ë³´ê³  ì‹¶ë‹¤ë©´ \textbf{F2 Score}(Recallì— ê°€ì¤‘ì¹˜)ë¥¼ ì“°ë©´ ë©ë‹ˆë‹¤. ë°˜ëŒ€ëŠ” F0.5 Scoreì…ë‹ˆë‹¤.

% --- 9. ë‹¤ìŒ ë‹¨ì› ì—°ê²° ---
\section*{ğŸ”— ë‹¤ìŒ ë‹¨ê³„ (Next Step)}
ì´ì œ ìš°ë¦¬ëŠ” ì„±ëŠ¥ì„ í‰ê°€í•˜ëŠ” ë‹¨ì¼ ìˆ«ì(F1 Score)ë¥¼ ì–»ì—ˆìŠµë‹ˆë‹¤.
ê·¸ëŸ°ë° í˜„ì‹¤ì—ì„œëŠ” ì„±ëŠ¥ë¿ë§Œ ì•„ë‹ˆë¼ ì œì•½ ì¡°ê±´ë„ ìˆìŠµë‹ˆë‹¤. \textbf{"ì •í™•ë„ëŠ” ë†’ì•„ì•¼ í•˜ì§€ë§Œ, ì‹¤í–‰ ì‹œê°„ì€ 10ms ì´ë‚´ì—¬ì•¼ í•œë‹¤."}

ì´ëŸ° ë³µì¡í•œ ìš”êµ¬ì‚¬í•­ì„ ì–´ë–»ê²Œ ë‹¨ì¼ ì§€í‘œë¡œ ì •ë¦¬í• ê¹Œìš”? ë‹¤ìŒ ì‹œê°„ì—ëŠ” \textbf{[Satisficing and Optimizing Metrics]}ë¥¼ í†µí•´, 'ìµœì í™”í•´ì•¼ í•  ê²ƒ'ê³¼ 'ë§Œì¡±ì‹œì¼œì•¼ í•  ê²ƒ'ì„ êµ¬ë¶„í•˜ëŠ” ì „ëµì„ ë°°ì›ë‹ˆë‹¤.

\vspace{0.5cm}

\begin{summarybox}{ë‹¨ì› ìš”ì•½ (Cheat Sheet)}
\begin{enumerate}
    \item \textbf{Need:} ë¶ˆê· í˜• ë°ì´í„°ì—ì„œëŠ” ì •í™•ë„ ëŒ€ì‹  Precision/Recallì„ ë´ì•¼ í•œë‹¤.
    \item \textbf{Trade-off:} Precisionê³¼ Recallì€ ë°˜ë¹„ë¡€ ê´€ê³„ë‹¤. ë‘˜ ë‹¤ ë†’ì€ ê²Œ ìµœê³ ë‹¤.
    \item \textbf{F1 Score:} ì¡°í™” í‰ê· ì´ë‹¤. ê·¹ë‹¨ì ì¸ ê°’(í•˜ë‚˜ë§Œ ë†’ì€ ê²½ìš°)ì— í˜ë„í‹°ë¥¼ ì£¼ì–´ ê· í˜•ì„ ì¡ëŠ”ë‹¤.
    \item \textbf{Single Number:} ì§€í‘œë¥¼ í•˜ë‚˜ë¡œ í•©ì³ì•¼ ë¹ ë¥¸ ì˜ì‚¬ê²°ì •ì´ ê°€ëŠ¥í•˜ë‹¤.
\end{enumerate}
\end{summarybox}

\end{document}